(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3124)}])},3124:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var n,i,l,a,c,s,h=r(5893),o=r(9520),f=r(7294),u=r(6501),d=r(5861),g=r(6411),x=r(1181),m=r(7357),w=r(6516),p=r(6447),y=r(6486);let v={O:"o",Ha:"ha",Ma:"ma",Chi:"chi",Ko:"ko",Empty:"empty"},j=e=>{let t={faces:e||Object.values(v).filter(e=>e!=v.Empty)};return{makeDice:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return{faces:[...t.faces,...e],life:r||5,icon:n||""}}}},E=e=>{let[t]=(0,f.useState)(e),[r,n]=(0,f.useState)(e),{makeDice:i}=j(),l=(e,t)=>{let r=e.dices[t],i=y.random(r.faces.length-1),l=e.dices.slice();return l[t]={...r,selected:r.faces[i]},n({dices:l}),{dices:l}},a=()=>{let e=r.dices.map(e=>({...e,selected:void 0}));return n({dices:e}),{dices:e}},c=(e,t)=>{let r=e.dices.map(e=>({...e,life:e.life-1})).filter(e=>e.life>0),l=t.map(e=>i([],e.life,e.icon)),a={dices:[...r,...l]};return n(a),a},s=()=>{n(t)};return{diceBox:r,roll:l,update:c,reset:a,restart:s}},O={Ohamachiko:"OHAMACHIKO",Hakomachiko:"HAKOMACHIKO",Machiko:"MACHIKO",MaoMao:"MAOMAO",Hamachi:"HAMACHI"},b=[{name:O.Ohamachiko,icon:"\uD83D\uDC30",units:[[v.O,1],[v.Ha,1],[v.Ma,1],[v.Chi,1],[v.Ko,1]],life:5},{name:O.Hakomachiko,icon:"\uD83D\uDC30",units:[[v.Ha,1],[v.Ma,1],[v.Chi,1],[v.Ko,2]],life:5},{name:O.Machiko,icon:"\uD83D\uDC30",units:[[v.Ma,1],[v.Chi,1],[v.Ko,1]],life:3},{name:O.MaoMao,icon:"\uD83D\uDE3A",units:[[v.Ma,2],[v.O,2]],life:4},{name:O.Hamachi,icon:"\uD83D\uDC1F",units:[[v.Ha,1],[v.Ma,1],[v.Chi,1]],life:3}],C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,[t]=(0,f.useState)(e),r=(e,t)=>e.get(t)||0,n=e=>{let n=e.dices.map(e=>e.selected).filter(e=>void 0!==e).reduce((e,t)=>{let r=e.get(t)||0;return e.set(t,r+1)},new Map);return t.map(e=>{let t=e.units.map(e=>{let[t,i]=e;return Math.floor(r(n,t)/i)});return y.fill(y.range(y.min(t)||0),e)}).flat()};return{roleCalc:n}},k=e=>{let t=()=>e.onClick();return(0,h.jsx)(w.Z,{variant:"outlined",onClick:t,disabled:e.disabled,children:"おはまちこする"})},M=()=>(0,h.jsx)(d.Z,{variant:"h1",children:"OHAMACHI DICE"});var H=r(3471);function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var P=function(e){return f.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),n||(n=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:30,y:100,width:260,height:50,rx:7.5,ry:7.5,fill:"#42a5f5"}),f.createElement("rect",{x:170,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#42a5f5"}),f.createElement("rect",{x:50,y:220,width:50,height:50,rx:7.5,ry:7.5,fill:"#42a5f5"}))))};function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var A=function(e){return f.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),i||(i=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:210,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#26c6da"}),f.createElement("rect",{x:60,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#26c6da"}))))};function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var I=function(e){return f.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),l||(l=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:30,y:65,width:200,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}),f.createElement("rect",{x:180,y:65,width:50,height:195,rx:7.5,ry:7.5,fill:"#ffca28"}),f.createElement("rect",{x:120,y:210,width:50,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}),f.createElement("rect",{x:240,y:210,width:50,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}))))};function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var B=function(e){return f.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),a||(a=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:60,y:40,width:200,height:50,rx:7.5,ry:7.5,fill:"#ef5350"}),f.createElement("rect",{x:135,y:80,width:50,height:195,rx:7.5,ry:7.5,fill:"#ef5350"}),f.createElement("rect",{x:60,y:135,width:200,height:50,rx:7.5,ry:7.5,fill:"#ef5350"}))))};function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var S=function(e){return f.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),c||(c=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:60,y:40,width:200,height:50,rx:7.5,ry:7.5,fill:"#7e57c2"}),f.createElement("rect",{x:210,y:80,width:50,height:195,rx:7.5,ry:7.5,fill:"#7e57c2"}),f.createElement("rect",{x:60,y:230,width:200,height:50,rx:7.5,ry:7.5,fill:"#7e57c2"}))))};function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var F=function(e){return f.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),s||(s=f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f",pointerEvents:"all"})))};let z=e=>{let{face:t,style:r}=e;switch(t){case v.O:return(0,h.jsx)(P,{style:r});case v.Ha:return(0,h.jsx)(A,{style:r});case v.Ma:return(0,h.jsx)(I,{style:r});case v.Chi:return(0,h.jsx)(B,{style:r});case v.Ko:return(0,h.jsx)(S,{style:r});default:return(0,h.jsx)(F,{style:r})}},R=e=>{var t;let r=null!==(t=e.size)&&void 0!==t?t:"160px";return(0,h.jsx)(m.Z,{sx:{justifyContent:"center",alignItems:"center",p:1},children:(0,h.jsx)(H.Z,{badgeContent:"".concat(e.icon).concat(e.life),color:"primary",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,h.jsx)(z,{face:e.selected,style:{width:r,height:r}})})})},X=()=>{let[e,t]=(0,f.useState)(!1),[r,n]=(0,f.useState)(0),{makeDice:i}=j(),l={dices:[i([v.O]),i([v.Ha]),i([v.Ma]),i([v.Chi]),i([v.Ko])]},{diceBox:a,roll:c,reset:s,update:o,restart:O}=E(l),{roleCalc:b}=C(),H=(e,t)=>new Promise(r=>{setTimeout(()=>{let{name:n,icon:i}=t;(0,u.ZP)(()=>(0,h.jsx)(d.Z,{variant:"h2",children:"".concat(i," ").concat(n)})),r(e)},200)}),D=(e,t)=>new Promise(r=>{setTimeout(()=>{r(c(e,t))},250)}),P=()=>new Promise(e=>{t(!0),e(s())}),Z=()=>{Promise.resolve().then(()=>y.shuffle(y.range(a.dices.length)).reduce((e,t)=>e.then(e=>D(e,t)),Promise.resolve().then(P))).then(e=>{let t=b(e);return t.reduce((e,t)=>e.then(e=>H(e,t)),Promise.resolve().then(()=>t)).then(r=>o(e,t))}).then(()=>{t(!1),n(r+1)})},A=()=>{O(),n(0)},_=(0,g.Z)("(min-width:640px)"),I=_?"160px":"80px",K=a.dices.length<=0,B=()=>K?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(m.Z,{sx:{backgroundColor:"primary.light",width:"100%",paddingY:"4px"},children:"GAME OVER"}),(0,h.jsxs)(m.Z,{children:[r,"回おはまちこした！"]}),(0,h.jsx)(w.Z,{variant:"outlined",onClick:A,children:"もかもかもか！"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:a.dices.map((e,t)=>(0,h.jsx)(x.ZP,{item:!0,xs:!0,children:(0,h.jsx)(R,{...e,size:I})},t))}),(0,h.jsx)(m.Z,{children:(0,h.jsx)(k,{disabled:e,onClick:Z})}),(0,h.jsxs)(m.Z,{children:["OHAMACHI COUNTER: ",r]})]});return(0,h.jsxs)(p.Z,{spacing:3,sx:{justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%",p:2,bgcolor:"background.paper",borderRadius:3,border:"1px solid #1C78D3"},children:[(0,h.jsx)(m.Z,{children:(0,h.jsx)(M,{})}),(0,h.jsx)(B,{})]})},G=()=>(0,h.jsxs)(f.Fragment,{children:[(0,h.jsx)(u.x7,{}),(0,h.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"},children:(0,h.jsx)(X,{})})]});var U=G}},function(e){e.O(0,[662,964,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);