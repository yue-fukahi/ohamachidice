(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3124)}])},3124:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n,i,l,c,a,s,h=r(5893),o=r(9520),f=r(7294),u=r(6501),d=r(6411),g=r(6447),x=r(7357),w=r(1181),m=r(6486);let y={O:"o",Ha:"ha",Ma:"ma",Chi:"chi",Ko:"ko",Empty:"empty"},p=e=>{let[t,r]=(0,f.useState)(e),[n]=(0,f.useState)(e.dices.length),i=(e,t)=>{let n=e.dices[t],i=m.random(n.faces.length-1),l=e.dices.slice();return l[t]={...n,selected:n.faces[i]},r({dices:l}),{dices:l}},l=()=>{let e=t.dices.map(e=>({...e,selected:void 0}));return r({dices:e}),{dices:e}},c=(e,t)=>{let n={dices:[...e.dices,t]};return r(n),n},a=e=>{if(e.dices.length>n){e.dices.pop();let t={dices:e.dices};return r(t),t}return e};return{diceBox:t,roll:i,push:c,pop:a,reset:l}},v=e=>{let t={faces:e||Object.values(y).filter(e=>e!=y.Empty)};return{makeDice:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{faces:[...t.faces,...e]}}}},E={Ohamachiko:"OHAMACHIKO",Hakomachiko:"HAKOMACHIKO",Machiko:"MACHIKO",MaoMao:"MAOMAO",Hamachi:"HAMACHI"},j=[{name:E.Ohamachiko,icon:"\uD83D\uDC30",units:[[y.O,1],[y.Ha,1],[y.Ma,1],[y.Chi,1],[y.Ko,1]],extraDice:!0},{name:E.Hakomachiko,icon:"\uD83D\uDC30",units:[[y.Ha,1],[y.Ma,1],[y.Chi,1],[y.Ko,2]]},{name:E.Machiko,icon:"\uD83D\uDC30",units:[[y.Ma,1],[y.Chi,1],[y.Ko,1]]},{name:E.MaoMao,icon:"\uD83D\uDE3A",units:[[y.Ma,2],[y.O,2]]},{name:E.Hamachi,icon:"\uD83D\uDC1F",units:[[y.Ha,1],[y.Ma,1],[y.Chi,1]]}],O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,[t]=(0,f.useState)(e),r=(e,t)=>e.get(t)||0,n=e=>{let n=e.dices.map(e=>e.selected).filter(e=>void 0!==e).reduce((e,t)=>{let r=e.get(t)||0;return e.set(t,r+1)},new Map);return t.map(e=>{let t=e.units.map(e=>{let[t,i]=e;return Math.floor(r(n,t)/i)});return m.fill(m.range(m.min(t)||0),e)}).flat()};return{roleCalc:n}};var b=r(611);let C=e=>{let t=()=>e.onClick();return(0,h.jsx)(b.Z,{variant:"outlined",onClick:t,disabled:e.disabled,children:"おはまちこする"})};var k=r(5861);let M=()=>(0,h.jsx)(k.Z,{variant:"h1",children:"OHAMACHI DICE"});function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var H=function(e){return f.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),n||(n=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:30,y:100,width:260,height:50,rx:7.5,ry:7.5,fill:"#42a5f5"}),f.createElement("rect",{x:170,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#42a5f5"}),f.createElement("rect",{x:50,y:220,width:50,height:50,rx:7.5,ry:7.5,fill:"#42a5f5"}))))};function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var A=function(e){return f.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),i||(i=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:210,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#26c6da"}),f.createElement("rect",{x:60,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#26c6da"}))))};function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Z=function(e){return f.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),l||(l=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:30,y:65,width:200,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}),f.createElement("rect",{x:180,y:65,width:50,height:195,rx:7.5,ry:7.5,fill:"#ffca28"}),f.createElement("rect",{x:120,y:210,width:50,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}),f.createElement("rect",{x:240,y:210,width:50,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}))))};function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var K=function(e){return f.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),c||(c=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:60,y:40,width:200,height:50,rx:7.5,ry:7.5,fill:"#ef5350"}),f.createElement("rect",{x:135,y:80,width:50,height:195,rx:7.5,ry:7.5,fill:"#ef5350"}),f.createElement("rect",{x:60,y:135,width:200,height:50,rx:7.5,ry:7.5,fill:"#ef5350"}))))};function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var N=function(e){return f.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),a||(a=f.createElement("g",{pointerEvents:"all"},f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),f.createElement("rect",{x:60,y:40,width:200,height:50,rx:7.5,ry:7.5,fill:"#7e57c2"}),f.createElement("rect",{x:210,y:80,width:50,height:195,rx:7.5,ry:7.5,fill:"#7e57c2"}),f.createElement("rect",{x:60,y:230,width:200,height:50,rx:7.5,ry:7.5,fill:"#7e57c2"}))))};function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var T=function(e){return f.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),s||(s=f.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f",pointerEvents:"all"})))};let z=e=>{let{face:t,style:r}=e;switch(t){case y.O:return(0,h.jsx)(H,{style:r});case y.Ha:return(0,h.jsx)(A,{style:r});case y.Ma:return(0,h.jsx)(Z,{style:r});case y.Chi:return(0,h.jsx)(K,{style:r});case y.Ko:return(0,h.jsx)(N,{style:r});default:return(0,h.jsx)(T,{style:r})}},F=e=>{var t;let r=null!==(t=e.size)&&void 0!==t?t:"160px";return(0,h.jsx)(x.Z,{sx:{justifyContent:"center",alignItems:"center",p:1},children:(0,h.jsx)(z,{face:e.selected,style:{width:r,height:r}})})},X=()=>{let[e,t]=(0,f.useState)(!1),{makeDice:r}=v(),n={dices:[r([y.O]),r([y.Ha]),r([y.Ma]),r([y.Chi]),r([y.Ko])]},{diceBox:i,roll:l,reset:c,push:a,pop:s}=p(n),{roleCalc:o}=O(),E=(e,t)=>new Promise(r=>{setTimeout(()=>{let{name:n,icon:i}=t;u.ZP.success(n,{icon:i,duration:5e3,style:{fontSize:"200%",fontWeight:"200"}}),r(e)},200)}),j=(e,t)=>new Promise(r=>{setTimeout(()=>{r(l(e,t))},250)}),b=()=>new Promise(e=>{t(!0),e(c())}),k=()=>{Promise.resolve().then(()=>m.shuffle(m.range(i.dices.length)).reduce((e,t)=>e.then(e=>j(e,t)),Promise.resolve().then(b))).then(e=>{let n=o(e);n.reduce((e,t)=>e.then(e=>E(e,t)),Promise.resolve().then(()=>n)).then(i=>{0===n.length?s(e):n.some(e=>e.extraDice)&&a(e,r()),t(!1)})})},D=(0,d.Z)("(min-width:640px)"),H=D?"160px":"80px";return(0,h.jsxs)(g.Z,{spacing:3,sx:{justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%",p:2,bgcolor:"background.paper",borderRadius:3,border:"1px solid #1C78D3"},children:[(0,h.jsx)(x.Z,{children:(0,h.jsx)(M,{})}),(0,h.jsx)(w.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:i.dices.map((e,t)=>(0,h.jsx)(w.ZP,{item:!0,xs:!0,children:(0,h.jsx)(F,{...e,size:H})},t))}),(0,h.jsx)(x.Z,{children:(0,h.jsx)(C,{disabled:e,onClick:k})})]})},R=()=>(0,h.jsxs)(f.Fragment,{children:[(0,h.jsx)(u.x7,{}),(0,h.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"},children:(0,h.jsx)(X,{})})]});var W=R}},function(e){e.O(0,[662,79,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);