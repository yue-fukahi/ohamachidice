(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(1745)}])},1745:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var n,i,a,c,l,s,h=r(5893),o=r(6411),f=r(6447),u=r(7357),d=r(1181),g=r(9520),x=r(6486),w=r(7294),m=r(6501),y=r(611);let p=e=>{let t=()=>e.onClick();return(0,h.jsx)(y.Z,{variant:"outlined",onClick:t,disabled:e.disabled,children:"おはまちこする"})};var v=r(5861);let E=()=>(0,h.jsx)(v.Z,{variant:"h1",children:"OHAMACHI DICE"}),O={O:"o",Ha:"ha",Ma:"ma",Chi:"chi",Ko:"ko",Empty:"empty"};function j(){return(j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var b=function(e){return w.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),n||(n=w.createElement("g",{pointerEvents:"all"},w.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),w.createElement("rect",{x:30,y:100,width:260,height:50,rx:7.5,ry:7.5,fill:"#42a5f5"}),w.createElement("rect",{x:170,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#42a5f5"}),w.createElement("rect",{x:50,y:220,width:50,height:50,rx:7.5,ry:7.5,fill:"#42a5f5"}))))};function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var M=function(e){return w.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),i||(i=w.createElement("g",{pointerEvents:"all"},w.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),w.createElement("rect",{x:210,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#26c6da"}),w.createElement("rect",{x:60,y:30,width:50,height:260,rx:7.5,ry:7.5,fill:"#26c6da"}))))};function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var k=function(e){return w.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),a||(a=w.createElement("g",{pointerEvents:"all"},w.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),w.createElement("rect",{x:30,y:65,width:200,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}),w.createElement("rect",{x:180,y:65,width:50,height:195,rx:7.5,ry:7.5,fill:"#ffca28"}),w.createElement("rect",{x:120,y:210,width:50,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}),w.createElement("rect",{x:240,y:210,width:50,height:50,rx:7.5,ry:7.5,fill:"#ffca28"}))))};function D(){return(D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var P=function(e){return w.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),c||(c=w.createElement("g",{pointerEvents:"all"},w.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),w.createElement("rect",{x:60,y:40,width:200,height:50,rx:7.5,ry:7.5,fill:"#ef5350"}),w.createElement("rect",{x:135,y:80,width:50,height:195,rx:7.5,ry:7.5,fill:"#ef5350"}),w.createElement("rect",{x:60,y:135,width:200,height:50,rx:7.5,ry:7.5,fill:"#ef5350"}))))};function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var A=function(e){return w.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),l||(l=w.createElement("g",{pointerEvents:"all"},w.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f"}),w.createElement("rect",{x:60,y:40,width:200,height:50,rx:7.5,ry:7.5,fill:"#7e57c2"}),w.createElement("rect",{x:210,y:80,width:50,height:195,rx:7.5,ry:7.5,fill:"#7e57c2"}),w.createElement("rect",{x:60,y:230,width:200,height:50,rx:7.5,ry:7.5,fill:"#7e57c2"}))))};function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Z=function(e){return w.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:321,height:321,viewBox:"-0.5 -0.5 321 321"},e),s||(s=w.createElement("rect",{width:320,height:320,rx:48,ry:48,fill:"#fff",stroke:"#99f",pointerEvents:"all"})))};let I=e=>{let{face:t,style:r}=e;switch(t){case O.O:return(0,h.jsx)(b,{style:r});case O.Ha:return(0,h.jsx)(M,{style:r});case O.Ma:return(0,h.jsx)(k,{style:r});case O.Chi:return(0,h.jsx)(P,{style:r});case O.Ko:return(0,h.jsx)(A,{style:r});default:return(0,h.jsx)(Z,{style:r})}},B=e=>{var t;let r=null!==(t=e.size)&&void 0!==t?t:"160px";return(0,h.jsx)(u.Z,{sx:{justifyContent:"center",alignItems:"center",p:1},children:(0,h.jsx)(I,{face:e.selected,style:{width:r,height:r}})})},N=e=>{let[t,r]=(0,w.useState)(e),n=(e,t)=>{let n=e.dices[t],i=x.random(n.faces.length-1),a=e.dices.slice();return a[t]={...n,selected:n.faces[i]},r({dices:a}),{dices:a}},i=()=>{let e=t.dices.map(e=>({...e,selected:void 0}));return r({dices:e}),{dices:e}};return{diceBox:t,roll:n,reset:i}},S={Ohamachiko:"OHAMACHIKO",Hakomachiko:"HAKOMACHIKO",Machiko:"MACHIKO",MaoMao:"MAOMAO",Hamachi:"HAMACHI"},T=[{name:S.Ohamachiko,icon:"\uD83D\uDC30",units:[[O.O,1],[O.Ha,1],[O.Ma,1],[O.Chi,1],[O.Ko,1]]},{name:S.Hakomachiko,icon:"\uD83D\uDC30",units:[[O.Ha,1],[O.Ma,1],[O.Chi,1],[O.Ko,2]]},{name:S.Machiko,icon:"\uD83D\uDC30",units:[[O.Ma,1],[O.Chi,1],[O.Ko,1]]},{name:S.MaoMao,icon:"\uD83D\uDE3A",units:[[O.Ma,2],[O.O,2]]},{name:S.Hamachi,icon:"\uD83D\uDC1F",units:[[O.Ha,1],[O.Ma,1],[O.Chi,1]]}],z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,[t]=(0,w.useState)(e),r=(e,t)=>e.get(t)||0,n=e=>{let n=e.dices.map(e=>e.selected).filter(e=>void 0!==e).reduce((e,t)=>{let r=e.get(t)||0;return e.set(t,r+1)},new Map);return t.map(e=>{let t=e.units.map(e=>{let[t,i]=e;return Math.floor(r(n,t)/i)});return x.fill(x.range(x.min(t)||0),e)}).flat()};return{roleCalc:n}},F=()=>{let[e,t]=(0,w.useState)(!1),r=(e,t)=>new Promise(r=>{setTimeout(()=>{let{name:n,icon:i}=t;m.ZP.success(n,{icon:i,duration:5e3,style:{fontSize:"200%",fontWeight:"200"}}),r(e)},200)}),n={dices:[{faces:[O.O,O.Ha,O.Ma,O.Chi,O.Ko,O.O]},{faces:[O.O,O.Ha,O.Ma,O.Chi,O.Ko,O.Ha]},{faces:[O.O,O.Ha,O.Ma,O.Chi,O.Ko,O.Ma]},{faces:[O.O,O.Ha,O.Ma,O.Chi,O.Ko,O.Chi]},{faces:[O.O,O.Ha,O.Ma,O.Chi,O.Ko,O.Ko]}]},{diceBox:i,roll:a,reset:c}=N(n),{roleCalc:l}=z(),s=(e,t)=>new Promise(r=>{setTimeout(()=>{r(a(e,t))},250)}),g=()=>new Promise(e=>{t(!0),e(c())}),y=()=>{Promise.resolve().then(()=>x.shuffle(x.range(i.dices.length)).reduce((e,t)=>e.then(e=>s(e,t)),Promise.resolve().then(g))).then(e=>{let n=l(e);n.reduce((e,t)=>e.then(e=>r(e,t)),Promise.resolve().then(()=>n)).then(()=>{t(!1)})})},v=(0,o.Z)("(min-width:640px)"),j=v?"160px":"80px";return(0,h.jsxs)(f.Z,{spacing:3,sx:{justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%",p:2,bgcolor:"background.paper",borderRadius:3,border:"1px solid #1C78D3"},children:[(0,h.jsx)(u.Z,{children:(0,h.jsx)(E,{})}),(0,h.jsx)(d.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:i.dices.map((e,t)=>(0,h.jsx)(d.ZP,{item:!0,xs:!0,children:(0,h.jsx)(B,{...e,size:j})},t))}),(0,h.jsx)(u.Z,{children:(0,h.jsx)(p,{disabled:e,onClick:y})})]})},X=()=>(0,h.jsxs)(w.Fragment,{children:[(0,h.jsx)(m.x7,{}),(0,h.jsx)(g.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"},children:(0,h.jsx)(F,{})})]});var R=X}},function(e){e.O(0,[662,79,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);